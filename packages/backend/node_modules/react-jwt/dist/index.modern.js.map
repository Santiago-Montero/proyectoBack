{"version":3,"file":"index.modern.js","sources":["../src/jwt/index.ts","../src/hooks/index.tsx"],"sourcesContent":["/**\n * Try to decode a JWT. If the token is valid you'll get an object otherwise you'll get null\n * @param token - The JWT that you want to decode\n * @returns Decoded token\n */\nexport function decodeToken(token: string): Object | null {\n  try {\n    // if the token has more or less than 3 parts or is not a string\n    // then is not a valid token\n    if (token.split(\".\").length !== 3 || typeof token !== \"string\") {\n      return null;\n    }\n\n    // payload ( index 1 ) has the data stored and\n    // data about the expiration time\n    const payload: string = token.split(\".\")[1];\n    // determine the padding characters required for the base64 string\n    const padding: string = \"=\".repeat((4 - (payload.length % 4)) % 4);\n    // convert the base64url string to a base64 string\n    const base64: string =\n      payload.replace(\"-\", \"+\").replace(\"_\", \"/\") + padding;\n    // decode and parse to json\n    const decoded = JSON.parse(atob(base64));\n\n    return decoded;\n  } catch (error) {\n    // Return null if something goes wrong\n    return null;\n  }\n}\n\n/**\n * Verify if the token is expired or not\n * @param token - Your JWT\n * @returns boolean\n */\nexport function isTokenExpired(token: string): boolean {\n  const decodedToken: any = decodeToken(token);\n  let result: boolean = true;\n\n  if (decodedToken && decodedToken.exp) {\n    const expirationDate: Date = new Date(0);\n    expirationDate.setUTCSeconds(decodedToken.exp); // sets the expiration seconds\n    // compare the expiration time and the current time\n    result = expirationDate.valueOf() < new Date().valueOf();\n  }\n\n  return result;\n}\n","import { useState, useEffect } from \"react\";\nimport { decodeToken, isTokenExpired } from \"../jwt\";\n\n/**\n * This function will help you to decode a JWT and know if it's expired or not\n * @param userJwt - Your JWT\n * @returns An object containing the properties isExpired, decodedToken and reEvaluateToken\n */\nexport function useJwt(userJwt: string): IUseJwt {\n  const [isExpired, setIsExpired] = useState<boolean>(false);\n  const [decodedToken, setDecodedToken] = useState<any>(null);\n\n  useEffect(() => {\n    evaluateToken(userJwt);\n  }, [userJwt]);\n\n  const evaluateToken = (token: string) => {\n    setDecodedToken(decodeToken(token));\n    setIsExpired(isTokenExpired(token));\n  };\n\n  return { isExpired, decodedToken, reEvaluateToken: evaluateToken };\n}\n\ninterface IUseJwt {\n  isExpired: boolean;\n  decodedToken: Object;\n  reEvaluateToken: (token: string) => void;\n}\n"],"names":["decodeToken","token","split","length","payload","padding","repeat","base64","replace","decoded","JSON","parse","atob","error","isTokenExpired","decodedToken","result","exp","expirationDate","Date","setUTCSeconds","valueOf","useJwt","userJwt","useState","isExpired","setIsExpired","setDecodedToken","useEffect","evaluateToken","reEvaluateToken"],"mappings":";;SAKgBA,YAAYC;AAC1B,MAAI;AAGF,QAAIA,KAAK,CAACC,KAAN,CAAY,GAAZ,EAAiBC,MAAjB,KAA4B,CAA5B,IAAiC,OAAOF,KAAP,KAAiB,QAAtD,EAAgE;AAC9D,aAAO,IAAP;AACD;;AAID,QAAMG,OAAO,GAAWH,KAAK,CAACC,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAAxB;AAEA,QAAMG,OAAO,GAAW,IAAIC,MAAJ,CAAW,CAAC,IAAKF,OAAO,CAACD,MAAR,GAAiB,CAAvB,IAA6B,CAAxC,CAAxB;AAEA,QAAMI,MAAM,GACVH,OAAO,CAACI,OAAR,CAAgB,GAAhB,EAAqB,GAArB,EAA0BA,OAA1B,CAAkC,GAAlC,EAAuC,GAAvC,IAA8CH,OADhD;AAGA,QAAMI,OAAO,GAAGC,IAAI,CAACC,KAAL,CAAWC,IAAI,CAACL,MAAD,CAAf,CAAhB;AAEA,WAAOE,OAAP;AACD,GAnBD,CAmBE,OAAOI,KAAP,EAAc;AAEd,WAAO,IAAP;AACD;AACF;SAOeC,eAAeb;AAC7B,MAAMc,YAAY,GAAQf,WAAW,CAACC,KAAD,CAArC;AACA,MAAIe,MAAM,GAAY,IAAtB;;AAEA,MAAID,YAAY,IAAIA,YAAY,CAACE,GAAjC,EAAsC;AACpC,QAAMC,cAAc,GAAS,IAAIC,IAAJ,CAAS,CAAT,CAA7B;AACAD,IAAAA,cAAc,CAACE,aAAf,CAA6BL,YAAY,CAACE,GAA1C;AAEAD,IAAAA,MAAM,GAAGE,cAAc,CAACG,OAAf,KAA2B,IAAIF,IAAJ,GAAWE,OAAX,EAApC;AACD;;AAED,SAAOL,MAAP;AACD;;SCxCeM,OAAOC;kBACaC,QAAQ,CAAU,KAAV;MAAnCC;MAAWC;;mBACsBF,QAAQ,CAAM,IAAN;MAAzCT;MAAcY;;AAErBC,EAAAA,SAAS,CAAC;AACRC,IAAAA,aAAa,CAACN,OAAD,CAAb;AACD,GAFQ,EAEN,CAACA,OAAD,CAFM,CAAT;;AAIA,MAAMM,aAAa,GAAG,SAAhBA,aAAgB,CAAC5B,KAAD;AACpB0B,IAAAA,eAAe,CAAC3B,WAAW,CAACC,KAAD,CAAZ,CAAf;AACAyB,IAAAA,YAAY,CAACZ,cAAc,CAACb,KAAD,CAAf,CAAZ;AACD,GAHD;;AAKA,SAAO;AAAEwB,IAAAA,SAAS,EAATA,SAAF;AAAaV,IAAAA,YAAY,EAAZA,YAAb;AAA2Be,IAAAA,eAAe,EAAED;AAA5C,GAAP;AACD;;;;"}